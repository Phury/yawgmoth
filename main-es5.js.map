{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/app.routing.ts","webpack:///src/app/components/card-table/card-table.component.ts","webpack:///src/app/components/card-table/card-table.component.html","webpack:///src/app/components/card-tile/card-tile.component.ts","webpack:///src/app/components/card-tile/card-tile.component.html","webpack:///src/app/components/deck-card/deck-card.component.ts","webpack:///src/app/components/deck-card/deck-card.component.html","webpack:///src/app/components/deck-tile/deck-tile.component.ts","webpack:///src/app/components/deck-tile/deck-tile.component.html","webpack:///src/app/components/deck/deck.component.ts","webpack:///src/app/components/deck/deck.component.html","webpack:///src/app/components/keyrune/keyrune.component.ts","webpack:///src/app/components/keyrune/keyrune.component.html","webpack:///src/app/components/mana/mana.component.ts","webpack:///src/app/components/mana/mana.component.html","webpack:///src/app/components/spinner-card/spinner-card.component.ts","webpack:///src/app/components/spinner-card/spinner-card.component.html","webpack:///src/app/core/dropdown/dropdown.component.ts","webpack:///src/app/core/dropdown/dropdown.component.html","webpack:///src/app/core/toggle/toggle.component.ts","webpack:///src/app/core/toggle/toggle.component.html","webpack:///src/app/env.ts","webpack:///src/app/layouts/default-layout/default-layout.component.ts","webpack:///src/app/layouts/default-layout/default-layout.component.html","webpack:///src/app/layouts/navigation/navigation.component.ts","webpack:///src/app/layouts/navigation/navigation.component.html","webpack:///src/app/model/card.ts","webpack:///src/app/pages/collection/collection.component.ts","webpack:///src/app/pages/collection/collection.component.html","webpack:///src/app/pages/compare/compare.component.ts","webpack:///src/app/pages/compare/compare.component.html","webpack:///src/app/pages/deck-list/deck-list.component.ts","webpack:///src/app/pages/deck-list/deck-list.component.html","webpack:///src/app/pages/meta-list/meta-list.component.ts","webpack:///src/app/pages/meta-list/meta-list.component.html","webpack:///src/app/pages/wish-list/wish-list.component.ts","webpack:///src/app/pages/wish-list/wish-list.component.html","webpack:///src/app/services/collection.service.ts","webpack:///src/app/services/compare.service.ts","webpack:///src/app/services/csv.service.ts","webpack:///src/app/services/deck.service.ts","webpack:///src/app/services/logger.service.ts","webpack:///src/app/services/mtg.service.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AppComponent","title","selector","templateUrl","AppModule","forRoot","declarations","imports","providers","bootstrap","appRouting","path","component","data","children","redirectTo","pathMatch","searchFilter$","CardTableComponent","searchable","pipe","filterdCards$","cards$","elements","search","filter","state","cardName","toLowerCase","startsWith","CardTileComponent","showFace","DeckCardComponent","mtgService","previewCard$","getCardByName","meta","previewCard","DeckTileComponent","CARD_TYPE_GROUPES","DeckComponent","log","route","deckService","groupingOrder","a","b","indexOfA","indexOf","key","indexOfB","deckId","parent","snapshot","url","meta$","findMetadataById","deck$","getDeckById","mainboardGrouped$","deck","cards","reduce","acc","card","sideboard","has","types","get","push","set","cardMap","sideboard$","c","Map","KeyruneComponent","symbol","ManaComponent","cost","split","str","trim","map","token","replace","SpinnerCardComponent","spinnerCard","randomSpinner","spinners","Math","floor","random","length","DropdownComponent","valueChange","select","initialValue","evt","active","onValueChanged","emit","value","ToggleComponent","values","selectedItem","DEBUG","LOG_LEVEL","DefaultLayoutComponent","NavigationComponent","CARD_TYPES","CollectionComponent","collectionService","collection$","getCollection","CompareComponent","compareService","selectedSource$","sources$","listAllDecks","listAllWishDecks","owned","wished","concat","decks","label","join","source$","next","difference$","collection","diff","console","DeckListComponent","viewModes","selectedView","toggleView","MetaListComponent","WishListComponent","wishCards$","getWishCards","CollectionService","http","csvService","responseType","csv","parse","providedIn","CompareService","inCollection","findAllMatchingCards","name","required","amount","quantity","elt","withAmount","item","CsvService","sperator","csvFull","csvHeader","csvData","splice","row","cells","obj","forEach","el","i","DeckService","getCsv","deckPath","deckTxt","currentSection","line","partial","parseCardLine","section","getCard","o","cardLine","sectionName","tokens","slice","Number","LoggerService","message","msg","stackLine","stack","caller_line","lastIndexOf","filename_base","line_no","line_pos","dispVars","JSON","stringify","MtgService","mtgCard","debug","toCard","error","externalId","typeLine","parseTypeLine","oracleText","flavorText","cmc","manaCost","rarity","layout","faces","toCardFace","imgUrl","imgArtUrl","mtgCardFace","cardFace","type","val","find","environment","production","bootstrapModule","err"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'yawgmoth';\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { AppComponent } from './app.component';\r\nimport { DefaultLayoutComponent } from './layouts/default-layout/default-layout.component';\r\nimport { NavigationComponent } from './layouts/navigation/navigation.component';\r\nimport { DeckListComponent } from './pages/deck-list/deck-list.component';\r\nimport { CollectionComponent } from './pages/collection/collection.component';\r\nimport { WishListComponent } from './pages/wish-list/wish-list.component';\r\nimport { MetaListComponent } from './pages/meta-list/meta-list.component';\r\nimport { SpinnerCardComponent } from './components/spinner-card/spinner-card.component';\r\nimport { ManaComponent } from './components/mana/mana.component';\r\nimport { DeckComponent } from './components/deck/deck.component';\r\nimport { DeckCardComponent } from './components/deck-card/deck-card.component';\r\nimport { KeyruneComponent } from './components/keyrune/keyrune.component';\r\nimport { DeckTileComponent } from './components/deck-tile/deck-tile.component';\r\nimport { CardTileComponent } from './components/card-tile/card-tile.component';\r\nimport { ToggleComponent } from './core/toggle/toggle.component';\r\nimport { CompareComponent } from './pages/compare/compare.component';\r\nimport { DropdownComponent } from './core/dropdown/dropdown.component';\r\nimport { appRouting } from './app.routing';\r\nimport { CardTableComponent } from './components/card-table/card-table.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    DeckComponent,\r\n    SpinnerCardComponent,\r\n    ManaComponent,\r\n    DeckListComponent,\r\n    CollectionComponent,\r\n    DefaultLayoutComponent,\r\n    DeckCardComponent,\r\n    NavigationComponent,\r\n    KeyruneComponent,\r\n    DeckTileComponent,\r\n    CardTileComponent,\r\n    WishListComponent,\r\n    MetaListComponent,\r\n    ToggleComponent,\r\n    CompareComponent,\r\n    DropdownComponent,\r\n    CardTableComponent\r\n  ],\r\n  imports: [\r\n    RouterModule.forRoot(appRouting), //, { enableTracing: true }),\r\n    BrowserModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Routes } from '@angular/router';\r\nimport { DefaultLayoutComponent } from './layouts/default-layout/default-layout.component';\r\nimport { DeckListComponent } from './pages/deck-list/deck-list.component';\r\nimport { DeckComponent } from './components/deck/deck.component';\r\nimport { CollectionComponent } from './pages/collection/collection.component';\r\nimport { WishListComponent } from './pages/wish-list/wish-list.component';\r\nimport { MetaListComponent } from './pages/meta-list/meta-list.component';\r\nimport { CompareComponent } from './pages/compare/compare.component';\r\n\r\nexport const appRouting: Routes = [\r\n  // { path: 'decks/:id',      component: HeroDetailComponent },\r\n  {\r\n    path: 'decks',\r\n    component: DefaultLayoutComponent,\r\n    data: { title: 'Your decks' },\r\n    children: [\r\n      { path: '', component: DeckListComponent },\r\n    ]\r\n  },\r\n  {\r\n    path: 'decks/:id',\r\n    component: DefaultLayoutComponent,\r\n    data: { title: 'Deck details' },\r\n    children: [\r\n    { path: '', component: DeckComponent },\r\n    ]\r\n  },\r\n  {\r\n    path: 'collection',\r\n    component: DefaultLayoutComponent,\r\n    data: { title: 'Your cards' },\r\n    children: [\r\n      { path: '', component: CollectionComponent },\r\n    ]\r\n  },\r\n  {\r\n    path: 'wishlist',\r\n    component: DefaultLayoutComponent,\r\n    data: { title: 'Your wishlist' },\r\n    children: [\r\n      { path: '', component: WishListComponent },\r\n    ]\r\n  },\r\n  {\r\n    path: 'meta',\r\n    component: DefaultLayoutComponent,\r\n    data: { title: 'Mtg metagame' },\r\n    children: [\r\n      { path: '', component: MetaListComponent },\r\n    ]\r\n  },\r\n  {\r\n    path: 'compare/:id',\r\n    component: DefaultLayoutComponent,\r\n    data: { title: 'Compare decks' },\r\n    children: [\r\n      { path: '', component: CompareComponent },\r\n    ]\r\n  },\r\n  {path: 'compare', redirectTo: 'compare/', pathMatch: 'full'},\r\n  {\r\n    path: '',\r\n    redirectTo: '/decks',\r\n    pathMatch: 'full'\r\n  },\r\n  //{ path: '**', component: PageNotFoundComponent }\r\n];","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Observable, Subject, combineLatest } from 'rxjs';\r\nimport { Collectible } from 'src/app/model/collectible';\r\nimport { debounceTime, distinctUntilChanged, startWith, map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'ygm-card-table',\r\n  templateUrl: './card-table.component.html',\r\n})\r\nexport class CardTableComponent implements OnInit {\r\n\r\n  @Input() searchable: boolean = true;\r\n  @Input() cards$: Observable<Collectible[]>;\r\n  searchFilter: string;\r\n  searchFilter$ = new Subject<string>();\r\n  filterdCards$: Observable<Collectible[]>;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    this.searchFilter$.pipe(\r\n      debounceTime(400),\r\n      distinctUntilChanged(),\r\n    );\r\n    this.filterdCards$ = combineLatest([\r\n      this.cards$,\r\n      this.searchFilter$.pipe(startWith('')),\r\n    ]).pipe(\r\n      map(([elements, search]) => elements.filter(state => state.cardName.toLowerCase().startsWith(search.toLowerCase()))),\r\n    );\r\n  }\r\n\r\n}\r\n","<div class=\"collection-search-view\" *ngIf=\"searchable\">\r\n\t<form>\r\n\t\t<div class=\"has-icon-right\">\r\n\t\t\t<input type=\"text\" class=\"form-input\" placeholder=\"search\" name=\"searchFilter\"\r\n                [(ngModel)]=\"searchFilter\" \r\n                (keyup.enter)=\"searchFilter$.next($event.target.value)\" />\r\n\t\t\t<i class=\"form-icon icon icon-search\"></i>\r\n\t\t</div>\r\n\t</form>\r\n</div>\r\n<div class=\"columns collection-view\">\r\n\t<table class=\"table table-striped table-hover\">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th></th>\r\n\t\t\t\t<th>cardname</th>\r\n\t\t\t\t<th>set</th>\r\n\t\t\t\t<th>set num</th>\r\n\t\t\t\t<th>price</th>\r\n\t\t\t\t<th>quantity</th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody>\r\n\t\t\t<tr *ngFor=\"let item of (filterdCards$ | async)\" >\r\n\t\t\t\t<td><i class=\"icon icon-photo\"></i></td>\r\n\t\t\t\t<td>{{item.cardName}}</td>\r\n\t\t\t\t<td><ygm-keyrune [symbol]=\"item.set\"></ygm-keyrune></td>\r\n\t\t\t\t<td>{{item.setNumber}}</td>\r\n\t\t\t\t<td>{{item.price}}</td>\r\n\t\t\t\t<td>{{item.quantity}}</td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n</div>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Card } from 'src/app/model/card';\r\n\r\n@Component({\r\n  selector: 'ygm-card-tile',\r\n  templateUrl: './card-tile.component.html',\r\n})\r\nexport class CardTileComponent implements OnInit {\r\n  @Input() card: Card;\r\n  showFace = 'front';\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  toggle() {\r\n    this.showFace = (this.showFace === 'front' ? 'back' : 'front');\r\n  }\r\n}\r\n","<div class=\"container card-tile-view\">\r\n\t<div class=\"tile\">\r\n\t\t\r\n\t\t<ng-container [ngSwitch]=\"card.layout\">\r\n\t\t\t<!-- adventure/split as default layout because ngSwitchCase is limited to 1 value match -->\r\n\t\t\t<ng-container *ngSwitchDefault> \r\n\t\t\t\t<div class=\"tile-icon transform\">\r\n\t\t\t\t\t<img class=\"mtg-card\" src=\"{{card.imgUrl}}\" [ngClass]=\"showFace == 'front' ? '' : 'rotate'\" />\r\n\t\t\t\t\t<div class=\"text-center actions\" *ngIf=\"card.layout === 'split'\">\r\n\t\t\t\t\t\t<button class=\"btn btn-sm\" (click)=\"toggle()\">rotate</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"tile-content\">\r\n\t\t\t\t\t<div *ngFor=\"let face of card.faces\">\r\n\t\t\t\t\t\t<p class=\"tile-title\">{{face.name}}&nbsp;<ygm-mana [cost]=\"face.manaCost\"></ygm-mana></p>\r\n\t\t\t\t\t\t<p class=\"tile-subtitle\">{{face.typeLine}}</p>\r\n\t\t\t\t\t\t<p *ngIf=\"face.oracleText\" class=\"card-oracle\">{{face.oracleText}}</p>\r\n\t\t\t\t\t\t<p *ngIf=\"face.flavorText\" class=\"card-flavor\">{{face.flavorText}}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</ng-container>\r\n\r\n\t\t\t<ng-container *ngSwitchCase=\"'normal'\">\r\n\t\t\t\t<div class=\"tile-icon\">\r\n\t\t\t\t\t<img class=\"mtg-card\" src=\"{{card.imgUrl}}\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"tile-content\">\r\n\t\t\t\t\t<p class=\"tile-subtitle\">{{card.typeLine}}</p>\r\n\t\t\t\t\t<p *ngIf=\"card.oracleText\" class=\"card-oracle\">{{card.oracleText}}</p>\r\n\t\t\t\t\t<p *ngIf=\"card.flavorText\" class=\"card-flavor\">{{card.flavorText}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</ng-container>\r\n\r\n\t\t\t<ng-container *ngSwitchCase=\"'transform'\">\r\n\t\t\t\t<div class=\"tile-icon transform\">\r\n\t\t\t\t\t<img class=\"mtg-card back\" src=\"{{card.faces[1].imgUrl}}\" [ngClass]=\"showFace == 'front' ? '' : 'visible'\" />\r\n\t\t\t\t\t<img class=\"mtg-card front\" src=\"{{card.faces[0].imgUrl}}\" [ngClass]=\"showFace == 'front' ? 'visible' : ''\" />\r\n\t\t\t\t\t<div class=\"text-center actions\">\r\n\t\t\t\t\t\t<button class=\"btn btn-sm\" (click)=\"toggle()\">transform</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"tile-content\">\r\n\t\t\t\t\t<div *ngFor=\"let face of card.faces\">\r\n\t\t\t\t\t\t<p class=\"tile-title\">{{face.name}}&nbsp;<ygm-mana [cost]=\"face.manaCost\"></ygm-mana></p>\r\n\t\t\t\t\t\t<p class=\"tile-subtitle\">{{face.typeLine}}</p>\r\n\t\t\t\t\t\t<p *ngIf=\"face.oracleText\" class=\"card-oracle\">{{face.oracleText}}</p>\r\n\t\t\t\t\t\t<p *ngIf=\"face.flavorText\" class=\"card-flavor\">{{face.flavorText}}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</ng-container>\r\n\t\t</ng-container>\r\n\r\n\t</div>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport * as env from '../../env';\r\nimport { Deck, DeckMeta } from '../../model/deck';\r\nimport { Card } from '../../model/card';\r\nimport { MtgService } from '../../services/mtg.service';\r\n\r\n@Component({\r\n  selector: 'ygm-deck-card',\r\n  templateUrl: './deck-card.component.html',\r\n})\r\nexport class DeckCardComponent implements OnInit {\r\n  @Input() meta: DeckMeta;\r\n  previewCard$: Observable<Card>;\r\n\r\n  constructor(private mtgService: MtgService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.previewCard$ = this.mtgService.getCardByName(this.meta.previewCard);\r\n  }\r\n\r\n}\r\n","<div class=\"card\" *ngIf=\"(previewCard$ | async) as card\">\r\n  <div class=\"card-image\">\r\n    <img src=\"{{card.imgArtUrl}}\" class=\"img-responsive\" />\r\n  </div>\r\n  <div class=\"card-header\">\r\n    <div class=\"card-subtitle\">\r\n      <a [routerLink]=\"['/decks', meta.id]\" [state]=\"meta\" class=\"btn btn-success\">{{meta.name}}</a>\r\n    </div>\r\n    <div class=\"card-action\">\r\n      <span class=\"chip\">{{meta.format}}</span>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { DeckMeta } from 'src/app/model/deck';\r\nimport { Observable } from 'rxjs';\r\nimport { Card } from 'src/app/model/card';\r\nimport { MtgService } from 'src/app/services/mtg.service';\r\n\r\n@Component({\r\n  selector: 'ygm-deck-tile',\r\n  templateUrl: './deck-tile.component.html',\r\n})\r\nexport class DeckTileComponent implements OnInit {\r\n  @Input() meta: DeckMeta;\r\n  previewCard$: Observable<Card>;\r\n\r\n  constructor(private mtgService: MtgService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.previewCard$ = this.mtgService.getCardByName(this.meta.previewCard);\r\n  }\r\n\r\n}\r\n","<div class=\"tile\" *ngIf=\"(previewCard$ | async) as card\">\r\n  <div class=\"tile-icon\">\r\n\t<figure class=\"deck-icon\">\r\n\t    <img src=\"{{card.imgArtUrl}}\" />\r\n\t</figure>\r\n  </div>\r\n  <div class=\"tile-content\">\r\n  \t<p>\r\n\t  <a [routerLink]=\"['/decks', meta.id]\" [state]=\"meta\" class=\"btn btn-success\">{{meta.name}}</a>\r\n\t</p>\r\n\t<p>\r\n      <span class=\"chip\">{{meta.format}}</span>\r\n\t</p>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { map, flatMap, tap, filter } from 'rxjs/operators';\r\nimport { Deck, DeckMeta } from '../../model/deck';\r\nimport { Card } from '../../model/card';\r\nimport { DeckService } from '../../services/deck.service';\r\nimport { LoggerService } from 'src/app/services/logger.service';\r\nimport { KeyValue } from '@angular/common';\r\n\r\nconst CARD_TYPE_GROUPES = ['creature', 'planeswalker', 'instant', 'sorcery', 'artifact', 'enchantment', 'land'];\r\n\r\n@Component({\r\n  selector: 'ygm-deck',\r\n  templateUrl: './deck.component.html',\r\n})\r\nexport class DeckComponent implements OnInit {\r\n  meta$: Observable<DeckMeta>;\r\n  mainboardGrouped$: Observable<Map<string, Card[]>>;\r\n  sideboard$: Observable<Card[]>;\r\n\r\n  constructor(\r\n    private log: LoggerService,\r\n    private route: ActivatedRoute,\r\n    private deckService: DeckService) { }\r\n\r\n  ngOnInit(): void {\r\n    /*\r\n    TODO: get meta from state first\r\n    this.meta$ = this.route.paramMap.pipe(\r\n      map(() => window.history.state),\r\n      catchError(error => {\r\n        const deckId = this.route.parent.snapshot.url[1].path;\r\n        return this.deckService.getOne(deckId);\r\n      })\r\n    );\r\n    */\r\n    const deckId = this.route.parent.snapshot.url[1].path;\r\n    this.meta$ = this.deckService.findMetadataById(deckId);\r\n    const deck$ = this.meta$.pipe(\r\n      flatMap(meta => this.deckService.getDeckById(meta.id)),\r\n      // tap(deck => deck.cards.forEach(card => card.showDetails$ = new Subject<boolean>())),\r\n    );\r\n    this.mainboardGrouped$ = deck$.pipe(\r\n      map(deck => deck.cards.reduce((acc, card) => {\r\n        if (card.sideboard) {\r\n          // skip\r\n        } else if (acc.has(card.types[0])) {\r\n          acc.get(card.types[0]).push(card);\r\n        } else {\r\n          acc.set(card.types[0], [card]);\r\n        }\r\n        return acc;\r\n      }, this.cardMap()))\r\n    );\r\n    this.sideboard$ = deck$.pipe(\r\n      map(deck => deck.cards.filter(c => c.sideboard)),\r\n      // tap(cards => this.log.debug(cards, this)),\r\n    );\r\n  }\r\n\r\n  private cardMap(): Map<string, Card[]> {\r\n    return new Map<string, Card[]>();\r\n  }\r\n\r\n  groupingOrder = (a: KeyValue<string, Card[]>, b: KeyValue<string, Card[]>): number => {\r\n    const indexOfA = CARD_TYPE_GROUPES.indexOf(a.key);\r\n    const indexOfB = CARD_TYPE_GROUPES.indexOf(b.key);\r\n    return indexOfB > indexOfA ? -1 : (indexOfA > indexOfB ? 1 : 0);\r\n  }\r\n\r\n}\r\n","<div *ngIf=\"(meta$ | async) as meta\">\r\n  <h3>{{meta.name}}</h3>\r\n\r\n  <div class=\"float-right\">\r\n    <a class=\"btn btn-primary\"  [routerLink]=\"['/compare', meta.id]\">compare</a>\r\n  </div>\r\n  <div class=\"clearfix\"></div>\r\n\r\n  <!--\r\n  <div class=\"float-right\">\r\n    <div class=\"btn-group btn-group-block\">\r\n      <button class=\"btn\">Filter</button>\r\n    </div> \r\n  </div>\r\n  \r\n  <div class=\"\" >\r\n    <form>\r\n      <div class=\"form-group\">\r\n        <select class=\"form-select\">\r\n          <option>Choose an option</option>\r\n          <option>Slack</option>\r\n          <option>Skype</option>\r\n          <option>Hipchat</option>\r\n        </select>\r\n      </div>\r\n    </form>\r\n  </div>\r\n\r\n  <div class=\"clearfix\"></div>\r\n  -->\r\n\r\n  <div class=\"container\">\r\n    <div class=\"columns\">\r\n      <div class=\"column col-8 col-sm-12 lg-list\">\r\n        <div *ngFor=\"let entry of (mainboardGrouped$ | async) | keyvalue: groupingOrder\">\r\n          <h5 class=\"card-type-title\">\r\n            {{entry.key}}\r\n            <!-- <span>({{(sideboard$ | async)?[entry.key].lenght}})</span> --> \r\n          </h5>\r\n          <details *ngFor=\"let card of entry.value\" class=\"accordion\">\r\n            <ng-container *ngTemplateOutlet=\"cardDetail; context: { card: card }\"></ng-container>\r\n          </details>\r\n        </div>\r\n      </div>\r\n      <div class=\"column col-4 col-sm-12\">\r\n        <h5 class=\"card-type-title\">\r\n          sideboard\r\n          <!-- <span>({{(sideboard$ | async)?.lenght}})</span> -->\r\n        </h5>\r\n        <details *ngFor=\"let card of (sideboard$ | async)\" class=\"accordion\">\r\n          <ng-container *ngTemplateOutlet=\"cardDetail; context: { card: card }\"></ng-container>\r\n        </details>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<ng-template #cardDetail let-card=\"card\">\r\n  <summary class=\"accordion-header\">\r\n    <i class=\"icon icon-photo\"></i>\r\n    {{card.amount}}\r\n    <ng-container *ngIf=\"card.faces; else normal\">\r\n      <span>{{card.faces[0].name}}&nbsp;</span>\r\n      <ygm-mana [cost]=\"card.faces[0].manaCost\"></ygm-mana>\r\n    </ng-container>\r\n    <ng-template #normal>\r\n      <span>{{card.name}}&nbsp;</span>\r\n      <ygm-mana [cost]=\"card.manaCost\"></ygm-mana>\r\n    </ng-template>\r\n  </summary>\r\n  <div class=\"accordion-body\">\r\n    <ygm-card-tile [card]=\"card\"></ygm-card-tile>\r\n  </div>\r\n</ng-template>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ygm-keyrune',\r\n  templateUrl: './keyrune.component.html',\r\n})\r\nexport class KeyruneComponent implements OnInit {\r\n  @Input() symbol: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  keyruneClasses(): string[][] { // TODO: compute on @Input setter\r\n    return [['ss', 'ss-'+this.symbol.toLowerCase()]];\r\n  }\r\n}\r\n","<span class=\"mana\">\r\n  <i *ngFor=\"let symbols of keyruneClasses()\" [ngClass]=\"symbols\"></i>\r\n</span>","import { Component, OnInit, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ygm-mana',\r\n  templateUrl: './mana.component.html',\r\n})\r\nexport class ManaComponent implements OnInit {\r\n  @Input() cost: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  manaClasses(): string[][] { // TODO: compute on @Input setter\r\n    if (!this.cost) {\r\n      return [[]];\r\n    }\r\n    return this.cost.split(/{(.*?)}/)\r\n      .filter(str => str.trim() !== '')\r\n      .map(token => token.toLowerCase().replace('/', ''))\r\n      .map(cost => ['ms', 'ms-cost', 'ms-' + cost]);\r\n  }\r\n}\r\n","<span class=\"mana\">\r\n  <i *ngFor=\"let symbols of manaClasses()\" [ngClass]=\"symbols\"></i>\r\n</span>\r\n\r\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'ygm-spinner-card',\n  templateUrl: './spinner-card.component.html',\n})\nexport class SpinnerCardComponent implements OnInit {\n  @Input() card: Observable<string>;\n  spinnerCard: string;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.spinnerCard = this.randomSpinner();\n  }\n\n  private randomSpinner() {\n    const spinners = [\"angel\", \"embalmed\", \"exerted\", \"goat\", \"knight ally\", \"soldier\", \"squirrel\", \"thopter\", \"angel\"];\n    return \"assets/tokens/\" + spinners[Math.floor(Math.random()*spinners.length)] + \".gif\";\n  }\n\n}\n","<div *ngIf=\"(card | async) as card\">\r\n  <!--<img src=\"http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=409619&amp;type=card\" />-->\r\n  <img class=\"mtg-card\" src=\"{{card}}\" />\r\n</div>\r\n<div *ngIf=\"!(card | async)\">\r\n  <img class=\"mtg-card\" src=\"{{spinnerCard}}\" />\r\n</div>\r\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Item } from '../item';\r\n\r\n@Component({\r\n  selector: 'ygm-dropdown',\r\n  templateUrl: './dropdown.component.html',\r\n})\r\nexport class DropdownComponent implements OnInit {\r\n\r\n  @Input() initialValue: Item;\r\n  @Input() selectValues: Item[];\r\n  @Output() valueChange = new EventEmitter();\r\n  active: Item;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    this.select(this.initialValue);\r\n  }\r\n\r\n  select(evt: Item): void {\r\n    this.active = evt;\r\n    this.onValueChanged();\r\n  }\r\n\r\n  onValueChanged(): void {\r\n    this.valueChange.emit(this.active.value);\r\n  }\r\n\r\n}\r\n","<div class=\"dropdown\">\r\n\t<div class=\"btn-group\">\r\n\t\t<a class=\"btn btn-primary dropdown-toggle\" tabindex=\"0\">\r\n\t\t\t{{active?.label}} <i class=\"icon icon-caret\"></i>\r\n\t\t</a>\r\n\t\t<ul class=\"menu\">\r\n\t\t\t<li class=\"menu-item\" *ngFor=\"let item of selectValues\">\r\n\t\t\t\t<a [routerLink]=\"\" (click)=\"select(item)\">{{item.label}}</a>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n</div>\r\n","import { Component, OnInit, EventEmitter, Output, Input } from '@angular/core';\r\nimport { Item } from '../item';\r\n\r\n@Component({\r\n  selector: 'ygm-toggle',\r\n  templateUrl: './toggle.component.html',\r\n})\r\nexport class ToggleComponent implements OnInit {\r\n\r\n  @Input() values: Item[];\r\n  @Input() initialValue: Item;\r\n  @Output() valueChange = new EventEmitter();\r\n  active: Item;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    this.active = this.initialValue;\r\n    this.onValueChanged();\r\n  }\r\n\r\n  onValueChanged(): void {\r\n    this.valueChange.emit(this.active.value);\r\n  }\r\n\r\n  toggle(): void {\r\n    this.active = (this.active === this.values[0] ? this.values[1] : this.values[0]);\r\n    this.onValueChanged();\r\n  }\r\n\r\n  selectedClass(selectedItem: Item): string[] {\r\n    return selectedItem.value === this.active.value ? ['btn-primary'] : [];\r\n  }\r\n\r\n}\r\n","<div class=\"btn-group btn-group-block\">\r\n\t<button *ngFor=\"let item of values\" \r\n\t\tclass=\"btn btn-sm\" \r\n\t\t(click)=\"toggle()\" \r\n\t\t[ngClass]=\"selectedClass(item)\">\r\n\t\t{{item.label}}\r\n\t</button>\r\n</div>","'use strict';\r\n\r\nexport const DEBUG = true;\r\nexport const LOG_LEVEL = 'debug';\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ygm-default-layout',\r\n  templateUrl: './default-layout.component.html',\r\n})\r\nexport class DefaultLayoutComponent implements OnInit {\r\n  title: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"layout\">\r\n  <header>\r\n    <ygm-navigation></ygm-navigation>\r\n\t</header>\r\n  <div class=\"container app-content\">\r\n    <router-outlet></router-outlet>\r\n  </div>\r\n  <footer>\r\n    <p>Coded by <a>PH</a></p>\r\n  </footer>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ygm-navigation',\r\n  templateUrl: './navigation.component.html',\r\n})\r\nexport class NavigationComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<nav class=\"navbar fixed shadow\">\r\n\t<section class=\"navbar-section logo-section\">\r\n\t\t<span class=\"logo\">\r\n\t\t\t<span class=\"dot w\"></span>\r\n\t\t\t<span class=\"dot u\"></span>\r\n\t\t\t<span class=\"dot b\"></span>\r\n\t\t\t<span class=\"dot r\"></span>\r\n\t\t\t<span class=\"dot g\"></span>\r\n\t\t\t</span>\r\n\t\t<h1>Yawgmoth</h1>\r\n\t</section>\r\n\t<section class=\"navbar-section link-section\">\r\n\t\t<a class=\"btn btn-link\" [routerLink]=\"['/decks']\">My decks</a>\r\n\t\t<a class=\"btn btn-link\" [routerLink]=\"['/collection']\">Collection</a>\r\n\t\t<a class=\"btn btn-link\" [routerLink]=\"['/wishlist']\">Wishlist</a>\r\n\t\t<!--<a class=\"btn btn-link\" [routerLink]=\"['/meta']\">Meta</a>-->\r\n\t</section>\r\n</nav>","import { Subject } from 'rxjs';\r\n\r\nexport const CARD_TYPES = ['land', 'instant', 'sorcery', 'enchantment', 'creature', 'planeswalker', 'artifact'];\r\n\r\nexport interface CardFace {\r\n  name: string;\r\n  typeLine: string;\r\n  types: string[]\r\n  oracleText?: string;\r\n  flavorText?: string;\r\n  manaCost?: string;\r\n  imgUrl?: string;\r\n}\r\n\r\nexport interface Card {\r\n  name: string;\r\n  typeLine?: string;\r\n  types?: string[]\r\n  oracleText?: string;\r\n  flavorText?: string;\r\n  externalId?: string;\r\n  cmc?: number;\r\n  manaCost?: string;\r\n  imgUrl?: string;\r\n  imgArtUrl?: string;\r\n  rarity?: string;\r\n  layout?: string;\r\n  faces?: CardFace[]\r\n  /*ui */\r\n  sideboard?: boolean;\r\n  amount?: number;\r\n  showDetails$?: Subject<boolean>;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Observable, combineLatest } from 'rxjs';\r\nimport { CollectionService } from 'src/app/services/collection.service';\r\nimport { Collectible } from 'src/app/model/collectible';\r\n\r\n@Component({\r\n  selector: 'ygm-collection',\r\n  templateUrl: './collection.component.html',\r\n})\r\nexport class CollectionComponent implements OnInit {\r\n  collection$: Observable<Collectible[]>;\r\n\r\n  constructor(private collectionService: CollectionService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.collection$ = this.collectionService.getCollection();\r\n  }\r\n}\r\n","<ygm-card-table [cards$]=\"collection$\"></ygm-card-table>","import { Component, OnInit } from '@angular/core';\r\nimport { DeckService } from 'src/app/services/deck.service';\r\nimport { Observable, combineLatest, Subject, zip } from 'rxjs';\r\nimport { map, tap, flatMap } from 'rxjs/operators';\r\nimport { Card } from 'src/app/model/card';\r\nimport { CompareService, Diff } from 'src/app/services/compare.service';\r\nimport { CollectionService } from 'src/app/services/collection.service';\r\nimport { Item } from 'src/app/core/item';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'ygm-compare',\r\n  templateUrl: './compare.component.html',\r\n})\r\nexport class CompareComponent implements OnInit {\r\n\r\n  sources$: Observable<Item[]>;\r\n  source$: Observable<Card[]>;\r\n  difference$: Observable<Diff[]>;\r\n  selectedSource$ = new Subject<string>();\r\n\r\n  constructor(\r\n    private deckService: DeckService,\r\n    private collectionService: CollectionService,\r\n    private compareService: CompareService,\r\n    private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.sources$ = combineLatest([\r\n      this.deckService.listAllDecks(),\r\n      this.deckService.listAllWishDecks(),\r\n    ]).pipe(\r\n      map(([owned, wished]) => owned.concat(wished)),\r\n      // tap(decks => console.log(decks)),\r\n      map(decks => decks.map(deck => ({ value: deck.id, label: deck.id.split('_').join('/') }))),\r\n    );\r\n    this.source$ = this.selectedSource$.pipe(\r\n      map(next => this.deckService.getDeckById(next)),\r\n      flatMap(deck$ => deck$.pipe(\r\n        map(deck => deck.cards.concat(deck.sideboard)),\r\n        map(cards => cards.filter(card => card != null)),\r\n      )),\r\n    );\r\n    this.difference$ = combineLatest([\r\n      this.source$,\r\n      this.collectionService.getCollection()\r\n    ]).pipe(\r\n      map(([cards, collection]) => this.compareService.diff(cards, collection)),\r\n    );\r\n\r\n    const deckId = this.route.parent.snapshot.url[1].path;\r\n    if (deckId) {\r\n      console.log(deckId);\r\n      this.selectedSource$.next(deckId);\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"columns\">\r\n\t<div class=\"column col-6\">\r\n\t\t<ygm-dropdown \r\n\t\t\t[initialValue]=\"{ value: 'source', label: 'Select' }\"\r\n\t\t\t[selectValues]=\"(sources$ | async)\"\r\n\t\t\t(valueChange)=\"selectedSource$.next($event)\">\r\n\t\t</ygm-dropdown>\r\n\t</div>\r\n\t<div class=\"column col-6\">\r\n\t\t\r\n\t</div>\r\n</div>\r\n<div class=\"spacer\"></div>\r\n\r\n<div class=\"container\">\r\n\t<div class=\"columns\">\r\n\t\t<div class=\"column col-6\" *ngIf=\"source$ | async as cards; else empty\">\r\n\t\t\t<div *ngFor=\"let card of cards\">\r\n\t\t\t\t{{card?.amount}} {{card?.name}}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"column col-6\" *ngIf=\"difference$ | async as compare\">\r\n\t\t\t<ng-container *ngFor=\"let card of compare\">\r\n\t\t\t\t<div *ngIf=\"card.owned - card.required < 0\">\r\n\t\t\t\t\t{{card.owned - card.required}} {{card.name}} \r\n\t\t\t\t</div>\r\n\t\t\t</ng-container>\r\n\t\t</div>\r\n\t</div>\r\n\t<ng-template #empty>\r\n\t\t<div class=\"empty column col-12\">\r\n\t\t\t<div class=\"empty-icon\">\r\n\t\t\t\t<i class=\"icon icon-copy\"></i>\r\n\t\t\t</div>\r\n\t\t\t<p class=\"empty-title h5\">No deck selected</p>\r\n\t\t\t<p class=\"empty-subtitle\">Select a deck to compare with your collection.</p>\r\n\t\t</div>\r\n\t</ng-template>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { DeckMeta } from '../../model/deck';\r\nimport { DeckService } from '../../services/deck.service';\r\nimport { Item } from 'src/app/core/item';\r\n\r\n@Component({\r\n  selector: 'ygm-deck-list',\r\n  templateUrl: './deck-list.component.html',\r\n})\r\nexport class DeckListComponent implements OnInit {\r\n  viewModes: Item[] = [{\r\n    value: 'cardView',\r\n    label: 'Card View',\r\n  },\r\n  {\r\n    value: 'tileView',\r\n    label: 'Tile View',\r\n  }];\r\n  selectedView: string;\r\n  meta$: Observable<DeckMeta[]>;\r\n\r\n  constructor(private deckService: DeckService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.meta$ = this.deckService.listAllDecks();\r\n  }\r\n\r\n  toggleView(evt: any): void {\r\n    this.selectedView = evt;\r\n  }\r\n}\r\n","<div class=\"float-right\">\r\n  <ygm-toggle \r\n      [initialValue]=\"viewModes[0]\"\r\n      [values]=\"viewModes\"\r\n      (valueChange)=\"toggleView($event)\">\r\n  </ygm-toggle>\r\n</div>\r\n<div class=\"clearfix\"></div>\r\n\r\n<div *ngIf=\"selectedView === 'cardView'\" class=\"container\">\r\n  <div class=\"columns deck-card-view\">\r\n    <div *ngFor=\"let meta of (meta$ | async)\" class=\"column col-4 col-sm-12\">\r\n      <ygm-deck-card [meta]=\"meta\"></ygm-deck-card>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"selectedView === 'tileView'\" class=\"container grid-lg\">\r\n  <div class=\"columns deck-tile-view\">\r\n    <div *ngFor=\"let meta of (meta$ | async)\" class=\"column col-6 col-sm-12\">\r\n      <ygm-deck-tile [meta]=\"meta\"></ygm-deck-tile>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ygm-meta-list',\r\n  templateUrl: './meta-list.component.html',\r\n})\r\nexport class MetaListComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>meta-list works!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { DeckMeta } from 'src/app/model/deck';\r\nimport { DeckService } from 'src/app/services/deck.service';\r\nimport { Collectible } from 'src/app/model/collectible';\r\nimport { CollectionService } from 'src/app/services/collection.service';\r\n\r\n@Component({\r\n  selector: 'ygm-wish-list',\r\n  templateUrl: './wish-list.component.html',\r\n})\r\nexport class WishListComponent implements OnInit {\r\n\r\n  meta$: Observable<DeckMeta[]>;\r\n  wishCards$: Observable<Collectible[]>;\r\n\r\n  constructor(\r\n    private deckService: DeckService,\r\n    private collectionService: CollectionService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.meta$ = this.deckService.listAllWishDecks();\r\n    this.wishCards$ = this.collectionService.getWishCards();\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"container\">\r\n  <h2>Decks</h2>\r\n  <div class=\"container grid-lg\">\r\n    <div class=\"columns deck-tile-view\">\r\n      <div *ngFor=\"let meta of (meta$ | async)\" class=\"column col-6 col-sm-12\">\r\n        <ygm-deck-tile [meta]=\"meta\"></ygm-deck-tile>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <h2>Cards</h2>\r\n  <div class=\"container\">\r\n    <ygm-card-table [cards$]=\"wishCards$\" [searchable]=\"false\"></ygm-card-table>\r\n  </div>\r\n  \r\n</div>\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Collectible } from '../model/collectible';\r\nimport { CsvService } from './csv.service';\r\nimport { flatMap } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CollectionService {\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private csvService: CsvService) { }\r\n\r\n  getCollection(): Observable<Collectible[]> {\r\n    return this.http.get('assets/purchases.csv', { responseType: 'text'}).pipe(\r\n      flatMap(csv => of(this.csvService.parse(csv) as Collectible[]))\r\n    );\r\n  }\r\n\r\n  getWishCards(): Observable<Collectible[]> {\r\n    return this.http.get('assets/wishcards.csv', { responseType: 'text'}).pipe(\r\n      flatMap(csv => of(this.csvService.parse(csv) as Collectible[]))\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Card } from '../model/card';\r\nimport { Collectible } from '../model/collectible';\r\n\r\nexport interface Diff {\r\n  name?: string;\r\n  owned?: number;\r\n  required?: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CompareService {\r\n\r\n  constructor() { }\r\n\r\n  diff(cards: Card[], collection: Collectible[]): Diff[] {\r\n    // console.log(cards);\r\n    return (cards || []).reduce((acc, card) => {\r\n      const inCollection = this.findAllMatchingCards(card.name, collection);\r\n      // console.log(inCollection);\r\n      if (!inCollection) {\r\n        acc.push({\r\n          name: card.name,\r\n          owned: 0,\r\n          required: card.amount,\r\n        });\r\n      } else {\r\n        acc.push({\r\n          name: card.name,\r\n          owned: inCollection.quantity,\r\n          required: card.amount,\r\n        });\r\n      }\r\n      return acc;\r\n    }, []);\r\n  }\r\n\r\n  private findAllMatchingCards(cardName: string, collection: Collectible[]): {name: string, quantity: number} {\r\n    return collection\r\n        .filter(elt => elt.cardName === cardName)\r\n        .reduce((withAmount: {name: string, quantity: number}, item: Collectible) => {\r\n          withAmount.quantity += item.quantity;\r\n          return withAmount;\r\n        }, {name: cardName, quantity: 0});\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CsvService {\r\n  sperator: RegExp = /;/;///\\t/;\r\n\r\n  constructor() { }\r\n\r\n  parse(csv: string): any[] {\r\n    const csvFull = csv.split(/\\r\\n|\\n/);\r\n    const csvHeader = csvFull[0].split(this.sperator);\r\n    const csvData = csvFull.splice(1);\r\n\r\n    return csvData.filter(row => '' !== row).reduce((acc, row) => {\r\n      const cells = row.split(this.sperator);\r\n      const obj = {};\r\n      csvHeader.forEach((el, i) => {\r\n        obj[el] = cells[i];\r\n      });\r\n      acc.push(obj);\r\n      return acc;\r\n    }, []);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, forkJoin, of, merge } from 'rxjs';\r\nimport { flatMap, map, find, tap, share } from 'rxjs/operators';\r\nimport { MtgService } from './mtg.service';\r\nimport { Deck, DeckMeta } from '../model/deck';\r\nimport { Card } from '../model/card';\r\nimport { CsvService } from './csv.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DeckService {\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private mtgService: MtgService,\r\n    private csvService: CsvService) { }\r\n\r\n  public listAllDecks(): Observable<DeckMeta[]> {\r\n    return this.getCsv('assets/decks.csv').pipe(\r\n      flatMap(csv => of(this.csvService.parse(csv) as DeckMeta[])),\r\n      share(),\r\n    );\r\n  }\r\n\r\n  public listAllWishDecks(): Observable<DeckMeta[]> {\r\n    return this.getCsv('assets/wishdecks.csv').pipe(\r\n      flatMap(csv => of(this.csvService.parse(csv) as DeckMeta[])),\r\n      share(),\r\n    );\r\n  }\r\n\r\n  public findMetadataById(deckId: string): Observable<DeckMeta> {\r\n    return merge(this.listAllDecks(), this.listAllWishDecks()).pipe(\r\n      flatMap(meta => meta),\r\n      find(meta => meta.id === deckId)\r\n    );\r\n  }\r\n\r\n  public getDeckById(deckId: string): Observable<Deck> {\r\n    const deckPath = deckId.split('_').join('/');\r\n    return this.http.get(`assets/decks/${deckPath}.txt`, { responseType: 'text' as 'json'}).pipe(\r\n      map((deckTxt: string) => {\r\n        let currentSection = 'mainboard';\r\n        const cards$ = deckTxt.split(/\\r?\\n/)\r\n            .filter(str => str && str.length > 0)\r\n            .map(line => {\r\n              const partial = this.parseCardLine(line, currentSection);\r\n              if (partial.section !== currentSection) {\r\n                currentSection = partial.section;\r\n              }\r\n              return partial;\r\n            })\r\n            .filter(partial => partial.name !== null)\r\n            .map(partial => this.getCard(partial)); // [Observable<Card>]\r\n        return forkJoin(cards$); // Observable<Card[]>\r\n      }),\r\n      flatMap(o => o),\r\n      // tap(cards => console.log(cards)),\r\n      map(cards => ({name: deckId, cards: cards})),\r\n    );\r\n  }\r\n\r\n  private getCard(partial: {name: string, amount: number, section: string}): Observable<Card> {\r\n    return this.mtgService.getCardByName(partial.name).pipe(\r\n      map(card => ({...card, amount: partial.amount, sideboard: partial.section.toLowerCase() === 'sideboard'}))\r\n    );\r\n  }\r\n\r\n  private parseCardLine(cardLine: string, sectionName: string): {name: string, amount: number, section: string} {\r\n    const tokens = cardLine.split(' ');\r\n    if (tokens[0] === '#') {\r\n      return { name: null, amount: null, section: tokens[1] };\r\n    } else {\r\n      return { name: tokens.slice(1).join(' '), amount: Number(tokens[0]), section: sectionName };\r\n    }\r\n  }\r\n\r\n  private getCsv(path: string): Observable<string> {\r\n    return this.http.get(path, { responseType: 'text'});\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LOG_LEVEL } from '../env';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LoggerService {\r\n\r\n  constructor() { }\r\n\r\n  debug(message:any, ...dispVars: any[]) {\r\n    if (LOG_LEVEL === 'debug') {\r\n      // this.eLog((typeof message) === 'string' ? message : JSON.stringify(message), dispVars);\r\n      console.log(message);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * eLog - displays calling line number & message & dumps vars as pretty json string\r\n   * @param {string} msg - string to display in log message\r\n   * @param {any} dispVars - any number of variables (ellipsis , aka Rest parameters) to dump\r\n   * {@link https://github.com/evanw/node-source-map-support usable by typescript node-source-map-support module}\r\n   * {@link https://github.com/mozilla/source-map/ Mozilla source-map library & project}\r\n   * {@link http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/ good introduction to sourcemaps}\r\n   */\r\n  eLog(msg:string,...dispVars:any[]) {\r\n    /**\r\n     * go one line back for the caller\r\n     * @type {string}\r\n     */\r\n    let stackLine = (new Error).stack.split(\"\\n\")[2];\r\n    /**\r\n     * retrieve the file basename & positional data, after the last `/` to the `)` \r\n     */\r\n    // \r\n    let caller_line = stackLine.slice(stackLine.lastIndexOf('/'),stackLine.lastIndexOf(')'))\r\n    /**\r\n     *  test for no `/` ; if there is no `/` then use filename without a prefixed path\r\n     */ \r\n    if ( caller_line.length == 0 ) {\r\n      caller_line = stackLine.slice(stackLine.lastIndexOf('('),stackLine.lastIndexOf(')'))\r\n    }\r\n    // \r\n    /**\r\n     * filename_base - parse out the file basename; remove first `/` char and go to `:`\r\n     */\r\n    let filename_base = caller_line.slice(0+1,caller_line.indexOf(':'));\r\n    /**\r\n     * line_no - parse out the line number ; remove first `:` char and go to 2nd `:`\r\n     */\r\n    let line_no = caller_line.slice(caller_line.indexOf(':')+1,caller_line.lastIndexOf(':'));\r\n    /**\r\n     * line_pos - line positional - from the last `:` to the end of the string\r\n     */\r\n    let line_pos = caller_line.slice(caller_line.lastIndexOf(':')+1);\r\n    console.log(`eLog called by ${filename_base} on line# ${line_no} @ char# ${line_pos} said:\\n${msg}`);\r\n    // print out the input variables as pretty JSON strings\r\n    dispVars.forEach(value => {\r\n      console.log(JSON.stringify(value,null,2));\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map, tap, catchError } from 'rxjs/operators';\r\nimport { Card, CARD_TYPES, CardFace } from '../model/card';\r\nimport { LoggerService } from './logger.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MtgService {\r\n\r\n  constructor(\r\n    private log: LoggerService,\r\n    private http: HttpClient) { }\r\n\r\n  public getCardByName(cardName: string): Observable<Card> {\r\n    return this.http.get(`https://api.scryfall.com/cards/named?exact=${cardName}`).pipe(\r\n      tap(mtgCard => this.log.debug(mtgCard, this)),\r\n      map(mtgCard => this.toCard(mtgCard)),\r\n      catchError((error) => {\r\n        // TODO: handle display of erroneous card\r\n        console.error(error);\r\n        return of({name: cardName, amount: 0, types: []} as Card);\r\n      }),\r\n    );\r\n  }\r\n\r\n  private toCard(mtgCard: any): Card {\r\n    const card = {\r\n      externalId: mtgCard['id'],\r\n      name: mtgCard['name'],\r\n      typeLine: mtgCard['type_line'],\r\n      //TODO: superTypes, subTypes\r\n      types: this.parseTypeLine(mtgCard['type_line']),\r\n      oracleText: mtgCard['oracle_text'],\r\n      flavorText: mtgCard['flavor_text'],\r\n      cmc: mtgCard['cmc'],\r\n      manaCost: mtgCard['mana_cost'],\r\n      rarity: mtgCard['rarity'],\r\n      layout: mtgCard['layout'],\r\n      amount: 1,\r\n    } as Card;\r\n    if (mtgCard['card_faces']) {\r\n      card.faces = [\r\n        this.toCardFace(mtgCard['card_faces'][0]),\r\n        this.toCardFace(mtgCard['card_faces'][1]),\r\n      ];\r\n    }\r\n    if (mtgCard['image_uris']) {\r\n      //small, normal, large, png, art_crop, border_crop\r\n      card.imgUrl = mtgCard['image_uris']['normal'];\r\n      card.imgArtUrl = mtgCard['image_uris']['art_crop'];\r\n    }\r\n    return card;\r\n  }\r\n\r\n  private toCardFace(mtgCardFace: any): CardFace {\r\n    const cardFace: CardFace = {\r\n      name: mtgCardFace['name'],\r\n      typeLine: mtgCardFace['type_line'],\r\n      types: this.parseTypeLine(mtgCardFace['type_line']),\r\n      oracleText: mtgCardFace['oracle_text'],\r\n      flavorText: mtgCardFace['flavor_text'],\r\n      manaCost: mtgCardFace['mana_cost'],\r\n    };\r\n\r\n    if (mtgCardFace['image_uris']) {\r\n      cardFace.imgUrl = mtgCardFace['image_uris']['normal'];\r\n    }\r\n    return cardFace;\r\n  }\r\n\r\n  private parseTypeLine(typeLine: string): string[] {\r\n    return typeLine.split(' ').reduce((acc, type) => {\r\n      const val = CARD_TYPES.find(elt => elt === type.toLowerCase());\r\n      if (val) { acc.push(val); }\r\n      return acc;\r\n    }, []);\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}